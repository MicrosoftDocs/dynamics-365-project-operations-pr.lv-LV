---
title: Automātiskas rēķina izveides konfigurēšana — Lite
description: Šajā tēmā ir sniegta informācija par proforma rēķinu automātiskas izveides konfigurēšanu.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 0ce9cb9090c44762f370bf8d574d179077b6a821
ms.sourcegitcommit: 625878bf48ea530f3381843be0e778cebbbf1922
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 10/30/2020
ms.locfileid: "4176575"
---
# <a name="configure-automatic-invoice-creation---lite"></a><span data-ttu-id="31897-103">Automātiskas rēķina izveides konfigurēšana — Lite</span><span class="sxs-lookup"><span data-stu-id="31897-103">Configure automatic invoice creation - lite</span></span>
 
<span data-ttu-id="31897-104">_**Attiecas uz:** Lite izvietošana — pāreja uz proforma rēķina izrakstīšanu_</span><span class="sxs-lookup"><span data-stu-id="31897-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="31897-105">Jūs varat konfigurēt automātisku rēķinu izveidi risinājumā Dynamics 365 Project Operations.</span><span class="sxs-lookup"><span data-stu-id="31897-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="31897-106">Sistēma izveido melnraksta proforma rēķinu, pamatojoties uz rēķina grafiku katram projekta līgumam un līguma rindai.</span><span class="sxs-lookup"><span data-stu-id="31897-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="31897-107">Rēķinu grafiki tiek konfigurēti līguma rindas līmenī.</span><span class="sxs-lookup"><span data-stu-id="31897-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="31897-108">Katrai līguma rindai var noteikt atsevišķu rēķina grafiku vai vienu un to pašu rēķina grafiku var iekļaut ikvienā līguma rindā.</span><span class="sxs-lookup"><span data-stu-id="31897-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="31897-109">Kad izveidojat rēķinu, sistēma vienmēr katram projekta līgumam izveido vismaz vienu rēķinu.</span><span class="sxs-lookup"><span data-stu-id="31897-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="31897-110">Dažos gadījumos var būt izveidoti vairāki rēķini.</span><span class="sxs-lookup"><span data-stu-id="31897-110">In some cases, there may be multiple invoices created.</span></span>

<span data-ttu-id="31897-111">Piemēram, ja līgumam ir vairāki klienti, tiek izveidots tāds pats rēķinu skaits kā to klientu skaits, kuriem attiecīgajā projekta līgumā ir rēķinā iekļaujami darījumi.</span><span class="sxs-lookup"><span data-stu-id="31897-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="31897-112">Informācija par to, kā darījumi tiek iekļauti rēķinā</span><span class="sxs-lookup"><span data-stu-id="31897-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="31897-113">Dažreiz katra projekta līguma rinda nosaka atsevišķu rēķina grafiku.</span><span class="sxs-lookup"><span data-stu-id="31897-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="31897-114">Piemēram, ieviešanas pakalpojumiem, kas paredzēti Adatum līgumam, ir šādas līguma rindas:</span><span class="sxs-lookup"><span data-stu-id="31897-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="31897-115">Prototipa darbs, kas ir fiksēta cena ar diviem manuāli izveidotiem atskaites punktiem.</span><span class="sxs-lookup"><span data-stu-id="31897-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="31897-116">Ieviešanas darbs, kurā ir iekļauts laiks un par ko reizi divās nedēļās pirmdienā tiks izrakstīts rēķins.</span><span class="sxs-lookup"><span data-stu-id="31897-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="31897-117">Radušies izdevumi, kas jāapmaksā katru mēnesi katra mēneša pirmajā pirmdienā.</span><span class="sxs-lookup"><span data-stu-id="31897-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="31897-118">Rēķina grafiki, kas definēti katrā no šiem diviem rindas elementiem, izskatīsies, kā redzams tabulā.</span><span class="sxs-lookup"><span data-stu-id="31897-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="31897-119">Līguma rinda</span><span class="sxs-lookup"><span data-stu-id="31897-119">Contract line</span></span> | <span data-ttu-id="31897-120">Rēķina izpildes datums</span><span class="sxs-lookup"><span data-stu-id="31897-120">Invoice run date</span></span> | <span data-ttu-id="31897-121">Transakcijas pēdējais datums</span><span class="sxs-lookup"><span data-stu-id="31897-121">Transaction cut-off date</span></span> | <span data-ttu-id="31897-122">Atskaites punkta datums</span><span class="sxs-lookup"><span data-stu-id="31897-122">Milestone date</span></span> | <span data-ttu-id="31897-123">Atskaites punkta summa</span><span class="sxs-lookup"><span data-stu-id="31897-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="31897-124">Prototipa darbs</span><span class="sxs-lookup"><span data-stu-id="31897-124">Prototype work</span></span> | <span data-ttu-id="31897-125">5. oktobris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-125">October 5, Monday</span></span> | - | <span data-ttu-id="31897-126">5. oktobris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-126">October 5, Monday</span></span> | <span data-ttu-id="31897-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="31897-127">5000 USD</span></span> |
| - | <span data-ttu-id="31897-128">3. novembris, otrdiena</span><span class="sxs-lookup"><span data-stu-id="31897-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="31897-129">3. novembris, otrdiena</span><span class="sxs-lookup"><span data-stu-id="31897-129">November 3, Tuesday</span></span> | <span data-ttu-id="31897-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="31897-130">12,000 USD</span></span> |
| <span data-ttu-id="31897-131">Ieviešanas darbs</span><span class="sxs-lookup"><span data-stu-id="31897-131">Implementation work</span></span> | <span data-ttu-id="31897-132">5. oktobris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-132">October 5, Monday</span></span> | <span data-ttu-id="31897-133">4. oktobris, svētdiena</span><span class="sxs-lookup"><span data-stu-id="31897-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="31897-134">19. oktobris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-134">October 19, Monday</span></span> | <span data-ttu-id="31897-135">18. oktobris, svētdiena</span><span class="sxs-lookup"><span data-stu-id="31897-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="31897-136">2. novembris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-136">November 2, Monday</span></span> | <span data-ttu-id="31897-137">1. novembris, svētdiena</span><span class="sxs-lookup"><span data-stu-id="31897-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="31897-138">16. novembris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-138">November 16, Monday</span></span> | <span data-ttu-id="31897-139">15. novembris, svētdiena</span><span class="sxs-lookup"><span data-stu-id="31897-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="31897-140">Radušies izdevumi</span><span class="sxs-lookup"><span data-stu-id="31897-140">Expenses incurred</span></span> | <span data-ttu-id="31897-141">5. oktobris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-141">October 5, Monday</span></span> | <span data-ttu-id="31897-142">4. oktobris, svētdiena</span><span class="sxs-lookup"><span data-stu-id="31897-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="31897-143">2. novembris, pirmdiena</span><span class="sxs-lookup"><span data-stu-id="31897-143">November 2, Monday</span></span> | <span data-ttu-id="31897-144">1. novembris, svētdiena</span><span class="sxs-lookup"><span data-stu-id="31897-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="31897-145">Šajā piemērā, kad tiek izpildīta automātiskā rēķinu izveide:</span><span class="sxs-lookup"><span data-stu-id="31897-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="31897-146">**4. oktobris vai jebkura diena pirms tā**: šim līgumam netiek ģenerēts rēķins, jo tabula **Rēķina grafiks** katrai no šīm līguma rindām neizsauc 4. oktobri, svētdienu kā rēķina izpildes datumu.</span><span class="sxs-lookup"><span data-stu-id="31897-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="31897-147">**5. oktobris, pirmdiena**: viens rēķins tiek ģenerēts:</span><span class="sxs-lookup"><span data-stu-id="31897-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="31897-148">Prototipa darbs, kas ietver atskaites punktu, ja tas ir atzīmēts kā **Gatavs rēķina izrakstīšanai**.</span><span class="sxs-lookup"><span data-stu-id="31897-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="31897-149">Ieviešanas darbs, kurā ir iekļauti visi laika darījumi, kas izveidoti pirms darījuma pabeigšanas datuma 4. oktobrī, svētdienā, kas ir atzīmēts kā **Gatavs rēķina izrakstīšanai**.</span><span class="sxs-lookup"><span data-stu-id="31897-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="31897-150">Radušies izdevumi, kuros ir iekļauti visi izdevumu darījumi, kas izveidoti pirms darījuma pabeigšanas datuma 4. oktobrī, svētdienā, kas ir atzīmēts kā **Gatavs rēķina izrakstīšanai**.</span><span class="sxs-lookup"><span data-stu-id="31897-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="31897-151">**6. oktobris vai jebkura diena pirms 19. oktobra**: šim līgumam netiek ģenerēts rēķins, jo tabula **Rēķina grafiks** katrai no šīm līguma rindām neizsauc 6. oktobri vai jebkuru datumu pirms 19. oktobra kā rēķina izpildes datumu.</span><span class="sxs-lookup"><span data-stu-id="31897-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="31897-152">**19. oktobris, pirmdiena**: viens rēķins tiek izveidots no ieviešanas darba, kurā ir iekļauti visi laika darījumi, kas izveidoti pirms darījuma pabeigšanas datuma 18. oktobrī, svētdienā, kas ir atzīmēts kā **Gatavs rēķina izrakstīšanai**.</span><span class="sxs-lookup"><span data-stu-id="31897-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="31897-153">**2. novembris, pirmdiena**: viens rēķins tiek ģenerēts:</span><span class="sxs-lookup"><span data-stu-id="31897-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="31897-154">Ieviešanas darbs, kurā ir iekļauti visi laika darījumi, kas izveidoti pirms darījuma pabeigšanas datuma 1. novembrī, svētdienā, kas ir atzīmēts kā **Gatavs rēķina izrakstīšanai**.</span><span class="sxs-lookup"><span data-stu-id="31897-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="31897-155">Radušies izdevumi, kuros ir iekļauti visi izdevumu darījumi, kas izveidoti pirms darījuma pabeigšanas datuma 1. novembrī, svētdienā, kas ir atzīmēts kā **Gatavs rēķina izrakstīšanai**.</span><span class="sxs-lookup"><span data-stu-id="31897-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="31897-156">**3. novembris, otrdiena**: viens rēķins tiek ģenerēts prototipa darbam, kas ietver 12000 USD atskaites punktu, ja tas ir atzīmēts kā **Gatavs rēķina izrakstīšanai**.</span><span class="sxs-lookup"><span data-stu-id="31897-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="31897-157">Automātiskās rēķinu izrakstīšanas konfigurēšana</span><span class="sxs-lookup"><span data-stu-id="31897-157">Configure automatic invoicing</span></span>

<span data-ttu-id="31897-158">Veiciet tālāk norādītās darbības, lai konfigurētu automātisko rēķina izpildi.</span><span class="sxs-lookup"><span data-stu-id="31897-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="31897-159">Sadaļā **Project Operations** atveriet **Iestatījumi** > **Periodisku rēķinu iestatīšana**.</span><span class="sxs-lookup"><span data-stu-id="31897-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="31897-160">Izveidojiet lielapjoma darbu un nosauciet to **Project Operations rēķinu izveide**.</span><span class="sxs-lookup"><span data-stu-id="31897-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="31897-161">Lielapjoma darba nosaukumā jābūt iekļautiem vārdiem “rēķinu izveide”.</span><span class="sxs-lookup"><span data-stu-id="31897-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="31897-162">Laukā **Darba tips** atlasiet vienumu **Nav**.</span><span class="sxs-lookup"><span data-stu-id="31897-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="31897-163">Pēc noklusējuma lauki **Biežuma aizkave** un **Aktīvs** ir iestatīti uz **Jā**.</span><span class="sxs-lookup"><span data-stu-id="31897-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="31897-164">Atlasiet **Palaist darbplūsmu**.</span><span class="sxs-lookup"><span data-stu-id="31897-164">Select **Run Workflow**.</span></span> <span data-ttu-id="31897-165">Dialoglodziņā **Meklēt ierakstu** redzēsiet trīs darbplūsmas.</span><span class="sxs-lookup"><span data-stu-id="31897-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="31897-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="31897-166">ProcessRunCaller</span></span>
- <span data-ttu-id="31897-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="31897-167">ProcessRunner</span></span>
- <span data-ttu-id="31897-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="31897-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="31897-169">Atlasiet vienumu **ProcessRunCaller** un pēc tam **Pievienot**.</span><span class="sxs-lookup"><span data-stu-id="31897-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="31897-170">Nākamajā dialoglodziņā atlasiet **Labi**.</span><span class="sxs-lookup"><span data-stu-id="31897-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="31897-171">Darbplūsma **Miegs** seko darbplūsmai **Apstrādāt**.</span><span class="sxs-lookup"><span data-stu-id="31897-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="31897-172">5. darbībā varat arī atlasīt **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="31897-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="31897-173">Pēc tam, kad atlasā **Labi** **Apstrādāt** darbplūsmai seko **Miegs** darbplūsma.</span><span class="sxs-lookup"><span data-stu-id="31897-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="31897-174">**ProcessRunCaller** un **ProcessRunner** darbplūsmas veido rēķinus.</span><span class="sxs-lookup"><span data-stu-id="31897-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="31897-175">**ProcessRunCaller** izsauc **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="31897-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="31897-176">**ProcessRunner** ir darbplūsma, kas faktiski izveido rēķinus.</span><span class="sxs-lookup"><span data-stu-id="31897-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="31897-177">Darbplūsma darbojas caur visām līguma rindām, kurām ir jāizveido rēķini, un izveido rēķinu šīm rindām.</span><span class="sxs-lookup"><span data-stu-id="31897-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="31897-178">Lai noteiktu līguma rindas, kurām jāizveido rēķini, darbs tiek apskatīts līguma rindu rēķina izpildes datumos.</span><span class="sxs-lookup"><span data-stu-id="31897-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="31897-179">Ja līguma rindām, kas attiecas uz vienu līgumu, ir vienāds rēķina izpildes datums, darījumi tiek apvienoti vienā rēķinā, kurā ir divas rēķina rindas.</span><span class="sxs-lookup"><span data-stu-id="31897-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="31897-180">Ja nav nevienas transakcijas rēķinu izveidei, darbs izlaiž rēķina izveidošanu.</span><span class="sxs-lookup"><span data-stu-id="31897-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="31897-181">Kad **ProcessRunner** ir beidzis darboties, tas izsauc **ProcessRunCaller**, nodrošina beigu laiku un ir slēgts.</span><span class="sxs-lookup"><span data-stu-id="31897-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="31897-182">**ProcessRunCaller** pēc tam sāk skaitīt laiku, kas darbojas 24 stundas no norādītā beigu laika.</span><span class="sxs-lookup"><span data-stu-id="31897-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="31897-183">Taimera laika skaitīšanas beigās **ProcessRunCaller** tiek slēgts.</span><span class="sxs-lookup"><span data-stu-id="31897-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="31897-184">Lielapjoma izpildes darbs rēķinu izveidošanai ir kārtējais darbs.</span><span class="sxs-lookup"><span data-stu-id="31897-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="31897-185">Ja šis pakešapstrādes process ir palaists vairākas reizes, tiek izveidoti vairāki darba gadījumi un var tikt izraisītas kļūdas.</span><span class="sxs-lookup"><span data-stu-id="31897-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="31897-186">Tāpēc pakešapstrāde jāsāk tikai vienu reizi, un pēc tam tā ir jārestartē tikai tad, ja tā pārstāj darboties.</span><span class="sxs-lookup"><span data-stu-id="31897-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="31897-187">Project Operations lielapjomu rēķinu izveide darbojas vienīgi projekta līguma rindām, kuras ir konfigurējuši rēķinu grafiki.</span><span class="sxs-lookup"><span data-stu-id="31897-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="31897-188">Līguma rindai ar fiksētu cenas aprēķina metodi jābūt konfigurētiem atskaites punktiem.</span><span class="sxs-lookup"><span data-stu-id="31897-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="31897-189">Projekta līguma rindai ar laika un materiālu aprēķinu metodi ir jābūt iestatītam datuma bāzes rēķina grafikam.</span><span class="sxs-lookup"><span data-stu-id="31897-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>
